/*!
 * @preserve
 * scrolldepth.js | v0.9
 * Copyright (c) 2015 Rob Flaherty (@robflaherty), Leigh McCulloch (@___leigh___), Jeremy Hicks (@ponchorage)
 * Licensed under the MIT and GPL licenses.
 */
!function(e,t,n){"use strict";function r(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]}function o(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(){return Math.max(t.documentElement.scrollHeight,t.body.scrollHeight,t.documentElement.offsetHeight,t.body.offsetHeight,t.documentElement.clientHeight)}function u(){return e.innerHeight||t.documentElement.clientHeight||t.body.clientHeight}function a(){return e.pageYOffset||("CSS1Compat"===t.compatMode?t.documentElement.scrollTop:t.body.scrollTop)}function c(e){return e.getBoundingClientRect().top+a()}function f(r){return"undefined"!=typeof e.jQuery?e.jQuery(r).get(0):"undefined"!=typeof t.querySelector?t.querySelector(r):"#"==r.charAt(0)?t.getElementById(r.substr(1)):n}function s(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function g(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+type]=null}function m(t){D=!0,s(e,"scroll",t)}function d(t){D=!1,g(e,"scroll",t)}var p,h,v={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0},y=r({},v),E=[],D=!1,H=0,S=function(e){function t(e,t,n,r){p&&(p({event:"ScrollDistance",category:"Scroll Depth",action:e,label:t,value:1}),y.pixelDepth&&arguments.length>2&&n>H&&(H=n,p({event:"ScrollDistance",category:"Scroll Depth",action:"Pixel Depth",label:g(n),value:1})),y.userTiming&&arguments.length>3&&p({event:"ScrollTiming",category:"Scroll Depth",action:e,label:t,timing:r}))}function n(e){return{"25%":parseInt(.25*e,10),"50%":parseInt(.5*e,10),"75%":parseInt(.75*e,10),"100%":e-5}}function i(e,n,r){for(var i in e)if(e.hasOwnProperty(i)){var l=e[i];!o(E,i)&&n>=l&&(t("Percentage",i,n,r),E.push(i))}}function s(e,n,r){for(var i=0;i<e.length;i++){var l=e[i];if(!o(E,l)){var u="string"==typeof l?f(l):l;if(u){var a=c(u);n>=a&&(t("Elements",l,n,r),E.push(l))}}}}function g(e){return(250*Math.floor(e/250)).toString()}function D(e,t){var n,r,o,i=null,l=0,u=function(){l=new Date,i=null,o=e.apply(n,r)};return function(){var a=new Date;l||(l=a);var c=t-(a-l);return n=this,r=arguments,0>=c?(clearTimeout(i),i=null,l=a,o=e.apply(n,r)):i||(i=setTimeout(u,c)),o}}var S=+new Date;y=r({},v,e),l()<y.minHeight||("function"==typeof y.eventHandler&&(p=y.eventHandler),h=D(function(){var e=l(),t=u(),r=a()+t,o=n(e),c=+new Date-S;return E.length>=4+y.elements.length?void d():(y.elements&&s(y.elements,r,c),void(y.percentage&&i(o,r,c)))},500),m(h))},b=function(){E=[],H=0,"undefined"!=typeof h&&(d(h),m(h))},w=function(e){if("undefined"!=typeof e&&i(e)){for(var t=0;t<e.length;t++){var n=e[t],r=y.elements.indexOf(n);-1==r&&y.elements.push(n)}D||m()}},x=function(e){if("undefined"!=typeof e&&i(e))for(var t=0;t<e.length;t++){var n=e[t],r=y.elements.indexOf(n);r>-1&&y.elements.splice(r,1);var o=E.indexOf(n);o>-1&&E.splice(o,1)}};e.scrolldepth={init:S,reset:b,addElements:w,removeElements:x},"undefined"!=typeof e.jQuery&&(e.jQuery.scrolldepth=S)}(window,document);